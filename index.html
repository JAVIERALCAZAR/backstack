<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>BackStack demo page</title>

    <meta http-equiv="Content-type" content="text/html; charset=utf-8">

    <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/style.css"/>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="scripts/libs/underscore/underscore-min.js"></script>
    <script type="text/javascript" src="scripts/libs/backbone/backbone-min.js"></script>
    <script type="text/javascript" src="scripts/libs/backstack/backstack-min.js"></script>

    <script type="text/javascript" src="scripts/views/IntroView.js"></script>
    <script type="text/javascript" src="scripts/views/AboutView.js"></script>
    <script type="text/javascript" src="scripts/views/ExampleView.js"></script>
    <script type="text/javascript" src="scripts/views/APIView.js"></script>
    <script type="text/javascript" src="scripts/views/MainView.js"></script>

    <script type="text/javascript" src="scripts/main.js"></script>

    <script type="text/javascript" src="http://use.typekit.com/fyi4kzh.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <!-- Templates -->
    <script id="introTemplate" type="text/html">
        <div>
            <h1>BackStack</h1>
            <span>For simple Backbone.js view transitions!</span>
            <p>
                <a href="#" class="start-demo">Click here to transition...</a>
            </p>
        </div>
    </script>

    <script id="mainTemplate" type="text/html">
        <div id="navBar">
            <button id="btnIntro" class="nav-bar-btn">Intro</button>
            <button id="btnAbout" data-view="aboutView" class="nav-bar-btn">About</button>
            <button id="btnAPI" data-view="apiView" class="nav-bar-btn">API</button>
            <button id="btnExample" data-view="exampleView" class="nav-bar-btn">Example</button>
        </div>
        <div id="subviewsContainer" />
    </script>

    <script id="aboutTemplate" type="text/html">
        <h3>What is it?</h3>
        <p>
            BackStack is a JavaScript component/extension for <a href="http://documentcloud.github.com/backbone" target="_blank">Backbone.js</a> it allows you to create nice view
            transitions in your HTML5 apps. By default it comes with an implementation of mobile-style slide transitions, fade
            transitions and no-effect transitions.
        </p>
        <p>
            It is conceptually based on <a href="http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ViewNavigator.html" target="_blank">ViewNavigator API</a> from mobile SDK of
            <a href="http://incubator.apache.org/flex/" target="_blank">Apache Flex framework</a>. It provides developers means to manage stack of views that can be pushed, popped or replaced.
        </p>

        <h3>Why should I use it?</h3>
        <p>Although you can use it for web development (as I did to create this site) it is especially useful when building mobile app with PhoneGap/Cordova framework.
            Of course if you are using frameworks like <a href="http://jquerymobile.com/" target="_blank">jQuery Mobile</a>,
            <a href="http://www.sencha.com/products/touch/" target="_blank">Sencha Touch</a>, <a href="http://www.jqtouch.com/" target="_blank">jQTouch</a> or probably dozen of other mobile UI frameworks you don't need it.
        </p>

        <h3>Download</h3>
        <p>You can get the latest version from a <a href="https://github.com/pwalczyszyn/backstack" target="_blank">BackStack project site on GitHub</a>.</p>

        <h3>Are there other alternatives?</h3>
        <p>You can use ViewNavigator implementation from <a href="http://triceam.github.com/app-UI/" target="_blank">app-UI</a> framework built by fellow Adobe Evangelist
            <a href="http://tricedesigns.com/" target="_blank">Andy Trice</a>. Of course you can build the transitions yourself, it is not really hard ;) or use already mentioned frameworks above.</p>

        <h3>How was it built?</h3>
        <p>This may not be particularly interesting to everyone but to develop/package BackStack an <a href="https://github.com/jrburke/almond" target="_blank">almond</a> library was used. Almond is a replacement AMD loader for RequireJS. It is a smaller "shim" loader, providing the minimal AMD API footprint that includes loader plugin support.</p>
    </script>

    <script id="apiTemplate" type="text/html">
        <h2>BackStack.StackNavigator class API's.</h2>

        <h3>Constructor</h3>
        <ul>
            <li><strong>options</strong> - Backbone view options hash.
                <ul>
                    <li><strong>options.popTransition</strong> - default transition effect object to be used during pop operations.</li>
                    <li><strong>options.pushTransition</strong> - default transition effect object to be used during push operations.</li>
                </ul>
            </li>
        </ul>

        <h3>Events</h3>
        <p>
            BackStack.StackNavigator eventing model is based on Backbone's events implementation.
            <ul>
                <li><strong>StackNavigator#viewChanging</strong> - It's triggered just before view on the stack is changed. This event is cancelable and the view change can be stopped using <code>event.preventDefault()</code> function.
                    <h4>Event object properties:</h4>
                    <ul>
                        <li><strong>action</strong> - this property can have following values: push, pop, popAll, replace and replaceAll.</li>
                        <li><strong>fromViewClass</strong> - class of a from view.</li>
                        <li><strong>fromView</strong> - instance of a from view.</li>
                        <li><strong>toViewClass</strong> - class of a to view.</li>
                        <li><strong>toView</strong> - instance of a to view.</li>
                    </ul>
                </li>

                <li><strong>StackNavigator#viewChanged</strong> - It's triggered after view on the stack is changed. This event cannot be canceled.
                    <h4>Event object properties:</h4>
                    <ul>
                        <li><strong>target</strong> - Instance of BackStack.StackNavigator that triggered this event.</li>
                    </ul>
                </li>
                <li><strong>Backbone.View#viewActivate</strong> - This event is triggered when view is activated on the stack.
                    <h4>Event object properties:</h4>
                    <ul>
                        <li><strong>target</strong> - Instance of a view that was activated.</li>
                    </ul>
                </li>
                <li><strong>Backbone.View#viewDeactivate</strong> - This event is triggered when view is deactivated on the stack. Either it was popped or it was covered by another view.
                    <h4>Event object properties:</h4>
                    <ul>
                        <li><strong>target</strong> - Instance of a view that was deactivated.</li>
                    </ul>
                </li>
            </ul>
        </p>

        <h3>Fields</h3>
        <ul>
            <li><strong>StackNavigator.viewsStack</strong> - An array with all the view refs on the stack.</li>
            <li><strong>StackNavigator.activeView</strong> - View on top of the stack.</li>
            <li><strong>StackNavigator.defaultPushTransition</strong> - Default push transition effect.</li>
            <li><strong>StackNavigator.defaultPopTransition</strong> - Default pop transition effect.</li>
        </ul>

        <h3>Functions</h3>
        <ul>
            <li><strong>StackNavigator.popAll(transition)</strong> - Pops all views from a stack and leaves empty stack.
                <h4>Parameters:</h4>
                <ul>
                    <li>{Effect} <strong>transition</strong> Transition effect to be played when popping views.</li>
                </ul>
            </li>

            <li><strong>StackNavigator.popView(transition)</strong> - Pops an active view from a stack and displays one below.
                <h4>Parameters:</h4>
                <ul>
                    <li>{Effect} <strong>transition</strong> Transition effect to be played when popping new view.</li>
                </ul>
            </li>

            <li><strong>StackNavigator.pushView(view, viewOptions, transition)</strong> - Pushes new view to the stack.
                <h4>Parameters:</h4>
                <ul>
                    <li>{Backbone.View || Backbone.ViewClass} <strong>view</strong> View class or view instance to be pushed on top of the stack.</li>
                    <li>{Object} <strong>viewOptions</strong> Options to be passed if view is constructed by StackNavigator.</li>
                    <li>{Effect} <strong>transition</strong> Transition effect to be played when pushing new view.</li>
                </ul>
                <p><strong>Returns:</strong> {Backbone.View} Instance of a pushed view.</p>
            </li>

            <li><strong>StackNavigator.replaceAll(view, viewOptions, transition)</strong> - Replaces all of the views on the stack, with the one passed as a view param.
                <h4>Parameters:</h4>
                <ul>
                    <li>{Backbone.View || Backbone.ViewClass} <strong>view</strong> View class or view instance to be pushed on top of the stack.</li>
                    <li>{Object} <strong>viewOptions</strong> Options to be passed if view is constructed by StackNavigator.</li>
                    <li>{Effect} <strong>transition</strong> Transition effect to be played when replacing views.</li>
                </ul>
                <p><strong>Returns:</strong> {Backbone.View} Instance of a pushed view.</p>
            </li>

            <li><strong>StackNavigator.replaceView(view, viewOptions, transition)</strong> - Replaces view on top of the stack, with the one passed as a view param.
                <h4>Parameters:</h4>
                <ul>
                    <li>{Backbone.View || Backbone.ViewClass} <strong>view</strong> View class or view instance to be pushed on top of the stack instead of current one.</li>
                    <li>{Object} <strong>viewOptions</strong> Options to be passed if view is constructed by StackNavigator.</li>
                    <li>{Effect} <strong>transition</strong> Transition effect to be played when replacing view.</li>
                </ul>

                <p><strong>Returns:</strong> {Backbone.View} Instance of a pushed view.</p>
            </li>
        </ul>
    </script>

    <script id="exampleTamplate" type="text/html">
        <iframe id="ifJsfiddle" src="http://jsfiddle.net/pwalczyszyn/dwRQU/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
    </script>

    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-31959402-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</head>

<body onload="onBodyLoad()">

    <a href="https://github.com/pwalczyszyn/backstack">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" />
    </a>

    <div id="tabletContainer">
        <img src="images/border.png"/>
        <div id="container"/>
    </div>

</body>

</html>
